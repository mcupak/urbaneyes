<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/WEB-INF/templates/default.xhtml"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:s="http://jboss.org/seam/faces">

	<ui:define name="head">
		<f:metadata>
			<s:viewAction
				action="#{viewBean.loadSubmission(stateBean.submissionForEditId)}" />
			<s:viewAction
				action="#{cssBean.loadTab(stateBean.mySubmissionsView ? 1 : 0)}" />
		</f:metadata>
	</ui:define>

	<ui:define name="content">
		<h:form>
			<rich:panel style="margin-top: 12px;width: 100%;">
				<f:facet name="header">
					<h:outputText value="Submission details..."></h:outputText>
				</f:facet>
				<h:inputHidden value="#{viewBean.submission.id}" />
				<table>
					<tr>
						<td class="formcell">Date:</td>
						<td class="formcell"><h:outputText
								value="#{viewBean.submission.date}" /></td>
					</tr>
					<tr>
						<td class="formcell">Author:</td>
						<td class="formcell"><h:outputText
								value="#{viewBean.submission.user.name}" /></td>
					</tr>
					<tr>
						<td class="formcell">Survey:</td>
						<td class="formcell"><h:outputText
								value="#{viewBean.submission.survey.name}" /></td>
					</tr>
					<tr>
						<td class="formcell">Latitude:</td>
						<td class="formcell"><h:outputText
								value="#{viewBean.submission.point.latitude}" /></td>
					</tr>
					<tr>
						<td class="formcell">Longitude:</td>
						<td class="formcell"><h:outputText
								value="#{viewBean.submission.point.longitude}" /></td>
					</tr>
					<tr>
						<td class="formcell">Altitude:</td>
						<td class="formcell"><h:outputText
								value="#{viewBean.submission.point.altitude}" /></td>
					</tr>
					<tr>
						<td class="formcell">Answers:</td>
						<td class="formcell"><rich:dataTable id="answersTable"
								var="s" value="#{viewBean.submission.answers}"
								style="width:100%;">
								<rich:column id="question">
									<f:facet name="header">
										<h:outputText value="Question" />
									</f:facet>
									<h:outputText value="#{s.question.name}" />
								</rich:column>
								<rich:column id="answer">
									<f:facet name="header">
										<h:outputText value="Answer" />
									</f:facet>
									<h:outputText value="#{s.name}" />
								</rich:column>
							</rich:dataTable></td>
					</tr>
				</table>
				<p>
					<h:button value="Back"
						outcome="/mysubmissions.xhtml?faces-redirect=true"
						rendered="#{stateBean.mySubmissionsView}" />
					<h:button value="Back" outcome="/index.xhtml?faces-redirect=true"
						rendered="#{not stateBean.mySubmissionsView}" />
				</p>
			</rich:panel>
		</h:form>
	</ui:define>
</ui:composition>
